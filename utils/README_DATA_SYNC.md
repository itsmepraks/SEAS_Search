# Data Directory Structure

This document explains the data directory structure and how to keep files in sync.

## Directory Structure

```
SEAS_Search/
├── data/                    # Source data (used by Python scripts)
│   ├── spring_2026_courses.csv
│   ├── bulletin_courses.csv
│   ├── course_finetune.jsonl
│   └── course_finetune_kg_rag.jsonl
│
└── public/data/            # Frontend-accessible data (served by Next.js)
    ├── knowledge_graph.json
    ├── prerequisites_map.json
    ├── topics_map.json
    ├── instructors_map.json
    ├── training_metrics.json
    ├── model_comparison.json
    ├── course_finetune.jsonl          # Synced from data/
    └── course_finetune_kg_rag.jsonl   # Synced from data/
```

## File Usage

### `data/` folder (Backend/Python)
- **CSV files**: Used by Python scripts (`scrape_courses.py`, `prepare_dataset.py`)
  - `spring_2026_courses.csv` - Course schedule data
  - `bulletin_courses.csv` - Course descriptions
- **JSONL files**: Generated training datasets
  - `course_finetune.jsonl` - Standard fine-tuning dataset
  - `course_finetune_kg_rag.jsonl` - KG-RAG training dataset

### `public/data/` folder (Frontend)
- **JSON files**: Exported from notebooks/scripts for visualization
  - `knowledge_graph.json` - Full knowledge graph (from `convert_kg_to_json.py`)
  - `prerequisites_map.json` - Prerequisites mapping
  - `topics_map.json` - Topics mapping
  - `instructors_map.json` - Instructors mapping
  - `training_metrics.json` - Training metrics
  - `model_comparison.json` - Model comparison data
- **JSONL files**: Synced from `data/` for frontend display
  - `course_finetune.jsonl` - Used by DataExplorer component
  - `course_finetune_kg_rag.jsonl` - Used by DataExplorer component
- **CSV files**: Synced from `data/` for frontend exploration
  - `spring_2026_courses.csv` - Course schedule data (explorable in DataExplorer)
  - `bulletin_courses.csv` - Course descriptions (explorable in DataExplorer)

## Syncing Files

### Automatic Sync
The `prepare_dataset.py` script automatically syncs `course_finetune.jsonl` to `public/data/` after generation.

### Manual Sync
If you need to sync files manually (e.g., after updating `course_finetune_kg_rag.jsonl` from a notebook):

```bash
python utils/sync_data_to_public.py
```

This script copies:
- `data/course_finetune.jsonl` → `public/data/course_finetune.jsonl`
- `data/course_finetune_kg_rag.jsonl` → `public/data/course_finetune_kg_rag.jsonl`
- `data/spring_2026_courses.csv` → `public/data/spring_2026_courses.csv`
- `data/bulletin_courses.csv` → `public/data/bulletin_courses.csv`

## Important Notes

1. **CSV files exist in BOTH** - Source in `data/` for Python scripts, synced copy in `public/data/` for frontend exploration
2. **JSON files are ONLY in `public/data/`** - They're generated by export scripts
3. **JSONL files exist in BOTH** - Source in `data/`, synced copy in `public/data/` for frontend
4. **Always sync files** after regenerating them in notebooks or scripts

## Workflow

1. **Generate training data**: Run `python utils/prepare_dataset.py` (auto-syncs)
2. **Generate KG data**: Run notebook → manually sync with `python utils/sync_data_to_public.py`
3. **Export graph data**: Run `python utils/convert_kg_to_json.py` (outputs directly to `public/data/`)
